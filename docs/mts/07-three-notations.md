## Проекция 7: Три нотации МТС — границы и переходы

В Метатеории Связей существует ровно три нотации, образующие строго ортогональную архитектуру. Их разделение — не техническое удобство, а онтологическая необходимость: смешение доменов порождает иллюзию «метаязыка» и разрушает замкнутость системы.

---

### 1. Формальная нотация МТС: язык запросов по форме

**Назначение:** Запись аксиом, лемм, теорем и математических объектов как запросов к формам связей в асети.

**Алфавит:**
- Константы: `∞`, `1`, `0`
- Конструкторы: `->` (связь), `!->` (несвязь), `♂` (самозамыкание начала), `♀` (самозамыкание конца)
- Метаоператоры: `:` (акт различения формы), `=` (структурная тождественность), `!=` (нетождественность)
- Унарные операторы: `!` или `¬` (инверсия направленности)
- Группировка: круглые скобки `(` и `)` — **исключительно для переопределения порядка композиции запросов**

**Онтологический статус:** Каждый символ — уже связь, определённая своим паттерном формы:
```
∞   : запрос ко всем связям формы (x = x -> x)
♂x  : запрос ко всем связям формы (y = y -> x)
x♀  : запрос ко всем связям формы (y = x -> y)
a->b: запрос к связям с началом формы a и концом формы b
```

**Формат хранения:** файлы `.mtl` (Metatheory Language)

---

### 2. Строковые ачисла: человекочитаемая сериализация

**Назначение:** Представление произвольных данных (включая тексты на естественных языках и саму формальную нотацию) как последовательностей связей.

**Принцип кодирования:**
1. Каждый символ UTF-8 `c` вводится формальной нотацией через акт определения:
   ```
   'c' : T_c
   ```
   где `T_c` — терм, задающий форму связи для символа `c`.
2. Строка `c₁c₂...cₙ` интерпретируется как левоассоциативная композиция:
   ```
   (((∞ -> 'c₁') -> 'c₂') -> ... -> 'cₙ')
   ```

**Пример:**
```
"связь" ≡ (((((∞ -> 'с') -> 'в') -> 'я') -> 'з') -> 'ь')
```

**Онтологический статус:** Строковое ачисло — это не «строка текста», а конкретная связь в асети, имеющая форму последовательного связывания. Каждый символ — уже связь со своим смыслом.

**Формат хранения:** любой текстовый файл (включая `.mtl`), так как формальная нотация сама является строковым ачислом.

---

### 3. Четверичная нотация: базовая сериализация абитов

**Назначение:** Компактное представление любой связи в апамяти через минимальный алфавит из четырёх абитов.

**Алфавит (ровно 4 символа):**
| Абит | Форма связи      | Смысл запроса                          |
|------|------------------|----------------------------------------|
| `[`  | `♂∞`             | запрос к форме самозамкнутого начала   |
| `]`  | `∞♀`             | запрос к форме самозамкнутого конца    |
| `1`  | `♂∞ -> ∞♀`       | запрос к форме наличия связи (истина)  |
| `0`  | `∞♀ -> ♂∞`       | запрос к форме отсутствия связи (ложь) |

**Критически важные ограничения:**
- `∞` **не является абитом** и не входит в состав ачисел
- `∞` выражается через композицию абитов: `[] ≡ ∞`
- Любое ачисло **неявно начинается с `∞`** — это онтологическая точка отсчёта, маркер начала последовательности
- Круглые скобки `(` и `)` **запрещены** в абитовой нотации

**Почему только `[` и `]`, а не `(` и `)`?**
Круглые скобки в формальной нотации выполняют роль **метаоператора группировки** — они переопределяют порядок композиции запросов, но не являются запросами к формам связей. Их использование в абитовой нотации создало бы коллизию:
- В формальной нотации: `(a -> b)` — группировка запросов
- В абитовой нотации: `(` — абит начала контекста

Квадратные скобки `[` и `]` свободны от этой коллизии и естественно выражают структурные границы контекста в апамяти:
```
[010100[1001]010]  — вложенный контекст с чёткими границами
```

**Формат хранения:** файлы `.anum` (Associative NUMber)

---

### Границы доменов и правила перехода

| Свойство               | Формальная нотация      | Строковые ачисла         | Четверичная нотация     |
|------------------------|-------------------------|--------------------------|-------------------------|
| Онтологический статус  | Запросы по форме        | Конкретные связи         | Сериализация связей     |
| Алфавит                | `∞ ♂ ♀ -> : = ! ( )`   | Любой UTF-8              | `0 1 [ ]`               |
| Назначение             | Теоретическое описание  | Человекочитаемость       | Апамять / вычисления    |
| Является ли ачислом?   | Нет (язык запросов)     | Да (связь-последовательность) | Да (базовая форма)   |

**Правила перехода:**

1. **Формальная нотация → Строковое ачисло**
   - Каждый символ формальной нотации вводится актом определения `'символ' : форма`
   - Последовательность символов интерпретируется как левоассоциативная композиция связей
   - *Пример:* формула `♂∞` становится строковым ачислом `"♂∞"` ≡ `(∞ -> '♂') -> '∞'`

2. **Строковое ачисло → Четверичная нотация**
   - Каждый символ UTF-8 кодируется как последовательность абитов (биты → абиты: `0→0`, `1→1`)
   - Структурные границы контекста кодируются абитами `[` и `]`
   - *Пример:* символ `'A'` = `01000001₂` → ачисло `∞[01000001]`

3. **Четверичная нотация → Связь в асети**
   - Алгоритм десериализации резолвирует последовательность абитов в связь через композицию запросов:
     ```
     []   → резолюция([) -> резолюция(]) ≡ ♂∞ -> ∞♀ ≡ 1
     [0]  → резолюция([) -> резолюция(0) -> резолюция(]) ≡ ♂∞ -> 0 -> ∞♀
     ```

---

### Как избежать смешения доменов

**Запреты (онтологическая дисциплина):**

1. **Запрет смешения скобок:**
   - Круглые `(` `)` — **только** для группировки в формальной нотации
   - Квадратные `[` `]` — **только** как абиты начала/конца в четверичной нотации
   - Никаких «скобок приоритета» в абитовой нотации — только структурные границы контекста

2. **Запрет прямой интерпретации формул как ачисел:**
   - Формула `♂∞ -> ∞♀` — это запрос по форме, а не данные для апамяти
   - Чтобы сериализовать её, необходимо сначала преобразовать в строковое ачисло `"♂∞->∞♀"`, затем в четверичную форму

3. **Запрет использования ∞ как абита:**
   - `∞` существует только в формальной нотации как запрос к форме самозамыкания
   - В ачислах ∞ выражается неявно (начало последовательности) или явно как `[]`

**Практическое правило:**
> Если символ используется **внутри запроса по форме** (например, `♂∞` в формуле `♂∞ -> ∞♀`) — это формальная нотация.  
> Если символ является **компонентом последовательности** (например, `[` в ачисле `01[01]`) — это четверичная нотация.  
> Между ними всегда находится этап преобразования через строковое ачисло.

---

### Онтологическая чистота трёх нотаций

Три нотации МТС образуют замкнутую систему без внешних зависимостей:

1. **Формальная нотация** не «описывает» связи — она **есть** запросы по форме, реализованные как связи в асети
2. **Строковые ачисла** не «кодируют» данные — они **суть** конкретные связи-последовательности в асети
3. **Четверичная нотация** не «представляет» связи — она **есть** их базовая сериализация в апамяти

Разделение доменов сохраняет онтологическую чистоту: нет «метаязыка», описывающего «объектный язык». Есть только три взаимодополняющих способа различения форм в единой асети связей — от абстрактных запросов (формальная нотация) к конкретным структурам (строковые ачисла) и их минимальному представлению (четверичная нотация).